---
# Main playbook to install Tailscale on all cloud VMs
- hosts: localhost
  connection: local

  # Path to encrypted vars file
  vars_files:
    - "{{ playbook_dir }}/../vars/example.yml"
  
  roles:
    - tailscale

  tasks:

    - name: Debug auth key loaded?
      debug:
        msg: "Auth key: {{ tailscale_auth_key | default('MISSING') }}"
        verbosity: 1  # Only shows with -v
  
    - name: Display completion message
      debug:
        msg: "Tailscale installation completed on {{ inventory_hostname }}"
